{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\0\\u0412\\u0441\\u0456 \\u0432\\u0435\\u0440\\u0441\\u0456\\u0457\\\\Job-Portal-Redux\\\\frontend\\\\src\\\\components\\\\chat\\\\ChatRoom\\\\ChatRoom.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { Formik } from \"formik\";\nimport Form from \"react-bootstrap/Form\";\nimport Col from \"react-bootstrap/Col\";\nimport Button from \"react-bootstrap/Button\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Badge from 'react-bootstrap/Badge';\nimport * as yup from \"yup\";\nimport io from \"socket.io-client\";\nimport { Redirect } from \"react-router\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport moment from \"moment\";\nimport \"./ChatRoom.css\";\nimport { joinChatRoom, getRoomMessages, getChatRooms, getRoomDetail } from \"../../../utils\";\nimport { API_BASE_URL, ACCESS_TOKEN_NAME } from '../../../constants/constants';\nlet token = localStorage.getItem(ACCESS_TOKEN_NAME);\nconst socket = io(API_BASE_URL + '?authToken=' + token);\n\nconst getChatRoomId = () => {\n  return localStorage.getItem(\"chatRoomId\"); //return JSON.parse(localStorage.getItem(\"chatRoomId\"));\n};\n\nconst getChatRoomName = () => {\n  return localStorage.getItem('chatRoomName');\n};\n\nconst getCurrentUserId = () => {\n  return localStorage.getItem('userId');\n};\n\nconst schema = yup.object({\n  message: yup.string().required(\"Message is required\")\n});\n\nfunction ChatRoomPage() {\n  _s();\n\n  const [initialized, setInitialized] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [rooms, setRooms] = useState([]);\n  const [redirect, setRedirect] = useState(false);\n  const [redirectLogin, setRedirectLogin] = useState(false);\n  const [sppiner, setSpinner] = useState(false);\n  const [isLoading, setLoading] = useState(false);\n  const [showActionDropdown, setShowActionDropdown] = useState('hide');\n\n  function showActionDropdownHandler() {\n    if (showActionDropdown == 'hide') setShowActionDropdown('show');else setShowActionDropdown('hide');\n  }\n\n  async function handleClick(id, name, i) {\n    console.log(\"handleClick\");\n    if (!localStorage.getItem(ACCESS_TOKEN_NAME)) setRedirectLogin(true);\n    localStorage.setItem(\"chatRoomId\", id);\n    localStorage.setItem(\"chatRoomName\", name);\n    let token = localStorage.getItem(ACCESS_TOKEN_NAME);\n\n    try {\n      console.log(\"joinChatRoom\");\n      await joinChatRoom(id, token);\n      setRedirect(true);\n    } catch (err) {\n      localStorage.removeItem(ACCESS_TOKEN_NAME);\n      setRedirectLogin(true);\n      console.log(\"joinChatRoom error\");\n      console.log(err);\n    }\n  }\n\n  const handleSubmit = async evt => {\n    setSpinner(true);\n    console.log(\"handleSubmit\");\n    console.log(evt);\n    const isValid = await schema.validate(evt);\n\n    if (!isValid) {\n      console.log(\"not Valid data in handleSubmit function\");\n      return;\n    } else {\n      console.log(\"valid data\");\n    }\n\n    console.log(\"handleSubmit evt\");\n    console.log(evt);\n    const data = Object.assign({}, evt);\n    data.roomId = getChatRoomId();\n    data.message = evt.message;\n    socket.emit(\"message\", data);\n    evt.message = '';\n  };\n\n  const connectToRoom = () => {\n    socket.on(\"connect\", data => {\n      console.log(\"socke on connect\");\n      console.log(data);\n      socket.emit(\"join\", getChatRoomId());\n    });\n    socket.on(\"newMessage\", data => {\n      getMessages();\n    });\n    setInitialized(true);\n  };\n\n  const getMessages = async () => {\n    setSpinner(true);\n    const response = await getRoomMessages(getChatRoomId());\n    console.log(\"getMessages() response\");\n    console.log(response.data);\n    setSpinner(false);\n    setMessages(response.data);\n    setInitialized(true);\n  };\n\n  const getRooms = async () => {\n    const response = await getChatRooms();\n    setRooms(response.data);\n    setInitialized(true);\n  };\n\n  const getChatRoomDetail = async () => {\n    let token = localStorage.getItem(ACCESS_TOKEN_NAME);\n    const response = await getRoomDetail(getChatRoomId(), token);\n    setInitialized(true);\n  };\n\n  useEffect(() => {\n    if (!localStorage.getItem(ACCESS_TOKEN_NAME)) {\n      setRedirectLogin(true);\n    }\n\n    if (!initialized) {\n      getChatRoomDetail();\n      connectToRoom();\n      getMessages();\n      getRooms();\n    }\n  });\n\n  if (redirect) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/chatroom\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }, this);\n  }\n\n  if (redirectLogin) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid h-100  mt-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-center h-100\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-8 col-xl-6 chat\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-header msg_head\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex bd-highlight\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"user_info\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: [\"Chat Room: \", getChatRoomName()]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 207,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"1767 Messages\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"video_cam\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-video\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 211,\n                      columnNumber: 39\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-phone\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 212,\n                      columnNumber: 39\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                id: \"action_menu_btn\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => showActionDropdownHandler(),\n                  className: \"btn btn-sm btn-light\",\n                  type: \"button\",\n                  children: \"Actions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-ellipsis-v\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 215,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `action_menu ${showActionDropdown}`,\n                children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-user-circle\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 33\n                    }, this), \" View profile\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 223,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-users\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 224,\n                      columnNumber: 33\n                    }, this), \" Add to close friends\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 224,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-plus\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 225,\n                      columnNumber: 33\n                    }, this), \" Add to group\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 225,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-ban\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 226,\n                      columnNumber: 33\n                    }, this), \" Block\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body msg_card_body\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: sppiner ? /*#__PURE__*/_jsxDEV(Loader, {\n                  type: \"ThreeDots\",\n                  color: \"#00BFFF\",\n                  height: 100,\n                  width: 100\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 25\n                }, this) : ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 21\n              }, this), messages.map((m, i) => {\n                return /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-start mb-4\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"img_cont_msg\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: m.author.is_online == true ? 'green-dot' : 'offline-dot'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 246,\n                      columnNumber: 35\n                    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: \"https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg\",\n                      className: \"rounded-circle user_img_msg\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 247,\n                      columnNumber: 35\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 245,\n                    columnNumber: 31\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: getCurrentUserId() == m.author_id ? ' msg_cotainer_send' : ' msg_cotainer',\n                    children: [m.author.username, \": \", m.message, /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"msg_time\",\n                      children: moment(m.created_at).format('YYYY-MM-DD HH:mm')\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 252,\n                      columnNumber: 33\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 31\n                  }, this)]\n                }, i, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 244,\n                  columnNumber: 27\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-footer\",\n                children: /*#__PURE__*/_jsxDEV(Formik, {\n                  validationSchema: schema,\n                  onSubmit: handleSubmit,\n                  initialValues: {\n                    author: 'xyz',\n                    message: ''\n                  },\n                  children: ({\n                    handleSubmit,\n                    handleChange,\n                    handleBlur,\n                    values,\n                    touched,\n                    isInvalid,\n                    errors\n                  }) => /*#__PURE__*/_jsxDEV(Form, {\n                    noValidate: true,\n                    onSubmit: handleSubmit,\n                    children: /*#__PURE__*/_jsxDEV(Form.Row, {\n                      children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                        as: Col,\n                        md: \"12\",\n                        controlId: \"handle\",\n                        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                          children: \"Message\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 273,\n                          columnNumber: 39\n                        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                          type: \"text\",\n                          name: \"message\",\n                          placeholder: \"Message\",\n                          value: values.message || \"\",\n                          onChange: handleChange,\n                          isInvalid: touched.message && errors.message\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 274,\n                          columnNumber: 39\n                        }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n                          type: \"invalid\",\n                          children: errors.message\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 282,\n                          columnNumber: 39\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 272,\n                        columnNumber: 35\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 271,\n                      columnNumber: 31\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 3\n  }, this);\n}\n\n_s(ChatRoomPage, \"H1e8mdSpJz5HoisDqpqmcD3AHsM=\");\n\n_c = ChatRoomPage;\nexport default ChatRoomPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatRoomPage\");","map":{"version":3,"sources":["D:/0Всі версії/Job-Portal-Redux/frontend/src/components/chat/ChatRoom/ChatRoom.js"],"names":["React","useEffect","useState","Formik","Form","Col","Button","Container","Row","ListGroup","Badge","yup","io","Redirect","Loader","moment","joinChatRoom","getRoomMessages","getChatRooms","getRoomDetail","API_BASE_URL","ACCESS_TOKEN_NAME","token","localStorage","getItem","socket","getChatRoomId","getChatRoomName","getCurrentUserId","schema","object","message","string","required","ChatRoomPage","initialized","setInitialized","messages","setMessages","rooms","setRooms","redirect","setRedirect","redirectLogin","setRedirectLogin","sppiner","setSpinner","isLoading","setLoading","showActionDropdown","setShowActionDropdown","showActionDropdownHandler","handleClick","id","name","i","console","log","setItem","err","removeItem","handleSubmit","evt","isValid","validate","data","Object","assign","roomId","emit","connectToRoom","on","getMessages","response","getRooms","getChatRoomDetail","map","m","author","is_online","author_id","username","created_at","format","handleChange","handleBlur","values","touched","isInvalid","errors"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Formik } from \"formik\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport ListGroup from 'react-bootstrap/ListGroup'\r\nimport Badge from 'react-bootstrap/Badge'\r\nimport * as yup from \"yup\";\r\nimport io from \"socket.io-client\";\r\nimport { Redirect } from \"react-router\";\r\nimport Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport moment from \"moment\";\r\nimport \"./ChatRoom.css\";\r\nimport {joinChatRoom, getRoomMessages, getChatRooms, getRoomDetail } from \"../../../utils\";\r\nimport {API_BASE_URL, ACCESS_TOKEN_NAME} from '../../../constants/constants';\r\nlet token = localStorage.getItem(ACCESS_TOKEN_NAME)\r\nconst socket = io(API_BASE_URL+'?authToken='+token);\r\nconst getChatRoomId = () => {\r\n  return localStorage.getItem(\"chatRoomId\");\r\n  //return JSON.parse(localStorage.getItem(\"chatRoomId\"));\r\n};\r\nconst getChatRoomName = () => {\r\n  return localStorage.getItem('chatRoomName');\r\n};\r\nconst getCurrentUserId = () => {\r\n  return localStorage.getItem('userId');\r\n}\r\nconst schema = yup.object({\r\nmessage: yup.string().required(\"Message is required\"),\r\n});\r\nfunction ChatRoomPage() {\r\n  const [initialized, setInitialized] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n  const [rooms, setRooms] = useState([]);\r\n  const [redirect, setRedirect] = useState(false);\r\n  const [redirectLogin, setRedirectLogin] = useState(false);\r\n  const [sppiner, setSpinner] = useState(false);\r\n  const [isLoading, setLoading] = useState(false);\r\n  const [showActionDropdown, setShowActionDropdown] = useState('hide');\r\n  \r\n  function showActionDropdownHandler(){\r\n    if(showActionDropdown=='hide')\r\n    setShowActionDropdown('show')\r\n    else\r\n    setShowActionDropdown('hide')\r\n  }\r\n\r\n  async function handleClick(id,name,i){\r\n    console.log(\"handleClick\")\r\n    if(!localStorage.getItem(ACCESS_TOKEN_NAME))\r\n      setRedirectLogin(true)\r\n\r\n    localStorage.setItem(\"chatRoomId\", id);\r\n    localStorage.setItem(\"chatRoomName\", name);\r\n    let token = localStorage.getItem(ACCESS_TOKEN_NAME)\r\n\r\n    try{\r\n      console.log(\"joinChatRoom\")\r\n      await joinChatRoom(id, token);\r\n      setRedirect(true);\r\n\r\n    }catch(err){\r\n      localStorage.removeItem(ACCESS_TOKEN_NAME)\r\n      setRedirectLogin(true)\r\n      console.log(\"joinChatRoom error\")\r\n      console.log(err)\r\n    }\r\n  }\r\n  \r\n  const handleSubmit = async evt => {\r\n    setSpinner(true)\r\n    console.log(\"handleSubmit\")\r\n    console.log(evt)\r\n    const isValid = await schema.validate(evt);\r\n    if (!isValid) {\r\n      console.log(\"not Valid data in handleSubmit function\")\r\n      return;\r\n    }else{\r\n      console.log(\"valid data\")\r\n    }\r\n    console.log(\"handleSubmit evt\")\r\n    console.log(evt)\r\n    const data = Object.assign({}, evt);\r\n    data.roomId = getChatRoomId();\r\n    data.message = evt.message;\r\n    socket.emit(\"message\", data);\r\n    evt.message = '';\r\n  };\r\n\r\n  const connectToRoom = () => {\r\n\r\n    socket.on(\"connect\", data => {\r\n      console.log(\"socke on connect\")\r\n      console.log(data)\r\n      socket.emit(\"join\", getChatRoomId());\r\n    });\r\n\r\n    socket.on(\"newMessage\", data => {\r\n      getMessages();\r\n    });\r\n\r\n    setInitialized(true);\r\n\r\n  };\r\n  const getMessages = async () => {\r\n    setSpinner(true)\r\n    const response = await getRoomMessages(getChatRoomId());\r\n    console.log(\"getMessages() response\")\r\n    console.log(response.data)\r\n    setSpinner(false)\r\n    setMessages(response.data);\r\n    setInitialized(true);\r\n  };\r\n\r\n  const getRooms = async () => {\r\n    const response = await getChatRooms();\r\n    setRooms(response.data);\r\n    setInitialized(true);\r\n  };\r\n\r\n  const getChatRoomDetail = async () => {\r\n    let token = localStorage.getItem(ACCESS_TOKEN_NAME)\r\n    const response = await getRoomDetail(getChatRoomId(), token);\r\n    setInitialized(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if(! localStorage.getItem(ACCESS_TOKEN_NAME) ){\r\n      setRedirectLogin(true)\r\n    }\r\n    if (!initialized) {\r\n      getChatRoomDetail()\r\n      connectToRoom();\r\n      getMessages();\r\n      getRooms();\r\n    }\r\n  });\r\n\r\n  if (redirect) {\r\n    return (<Redirect to=\"/chatroom\" />);\r\n  }\r\n  if(redirectLogin){\r\n    return (<Redirect to='/login' />);\r\n  }\r\nreturn (\r\n  <div>\r\n    <div className=\"container-fluid h-100  mt-5\">\r\n        <div className=\"row justify-content-center h-100\">\r\n            {/*\r\n            <div className=\"col-md-4 col-xl-3 chat\">\r\n                <div className=\"card mb-sm-3 mb-md-0 contacts_card\">\r\n                    <div className=\"card-header\">\r\n                        <div className=\"input-group\">\r\n                            <input type=\"text\" placeholder=\"Search...\" name=\"\" className=\"form-control search\"/>\r\n                            <div className=\"input-group-prepend\">\r\n                                <span className=\"input-group-text search_btn\"><i className=\"fas fa-search\"></i></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"card-body contacts_body\">\r\n                        <ul className=\"contacts\">\r\n                            {rooms.map((room, i)=>{\r\n                            return(\r\n                            <li className={getChatRoomId() == room._id ? ' active-chat' : ' not-active-chat' } key={i}> \r\n                            <div className=\"d-flex bd-highlight\">\r\n                                <div className=\"img_cont\">\r\n                                    <img src=\"https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg\" className=\"rounded-circle user_img\"/>\r\n                                </div>\r\n                                <div className=\"user_info\">\r\n                                    <span>{room.name}</span>\r\n                                    <p>\r\n                                        <Button\r\n                                            className=\" ml-2\"\r\n                                            variant=\"dark\"\r\n                                            size=\"sm\"\r\n                                            disabled={isLoading}\r\n                                            onClick={() => handleClick(room._id, room.name,  i)}\r\n                                        >\r\n                                        {isLoading ? 'Joining…' : 'Join Room'}\r\n                                        </Button>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            </li>\r\n                            )\r\n                            })}\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"card-footer\"></div>\r\n                </div>\r\n            </div>\r\n            */}\r\n\r\n            <div className=\"col-md-8 col-xl-6 chat\">\r\n                <div className=\"card\">\r\n                    <div className=\"card-header msg_head\">\r\n                        <div className=\"d-flex bd-highlight\">\r\n                            {/*<div className=\"img_cont\">\r\n                                <img src=\"https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg\" className=\"rounded-circle user_img\"/>\r\n                                <span className=\"online_icon\"></span>\r\n                            </div>*/}\r\n                            <div className=\"user_info\">\r\n                                <span>Chat Room: {getChatRoomName()}</span>\r\n                                <p>1767 Messages</p>\r\n                            </div>\r\n                            <div className=\"video_cam\">\r\n                                <span><i className=\"fas fa-video\"></i></span>\r\n                                <span><i className=\"fas fa-phone\"></i></span>\r\n                            </div>\r\n                        </div>\r\n                        <span id=\"action_menu_btn\">\r\n                        <button onClick={ () => showActionDropdownHandler() } className=\"btn btn-sm btn-light\" type=\"button\">\r\n                        Actions\r\n                        </button>\r\n                        <i className=\"fas fa-ellipsis-v\"></i>\r\n                        </span>\r\n                        <div className={`action_menu ${showActionDropdown}`}>\r\n                        <ul>\r\n                            <li><i className=\"fas fa-user-circle\"></i> View profile</li>\r\n                            <li><i className=\"fas fa-users\"></i> Add to close friends</li>\r\n                            <li><i className=\"fas fa-plus\"></i> Add to group</li>\r\n                            <li><i className=\"fas fa-ban\"></i> Block</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"card-body msg_card_body\">\r\n                    <div className=\"text-center\">\r\n                        {sppiner ?  \r\n                        <Loader\r\n                            type=\"ThreeDots\"\r\n                            color=\"#00BFFF\"\r\n                            height={100}\r\n                            width={100}\r\n                            />\r\n                        : ''}\r\n                    </div>\r\n                    {messages.map((m, i) => {\r\n                      return(\r\n                          <div className=\"d-flex justify-content-start mb-4\" key={i}>\r\n                              <div className=\"img_cont_msg\">\r\n                                  <span className={m.author.is_online==true ? 'green-dot' : 'offline-dot'}></span>\r\n                                  <img src=\"https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg\" className=\"rounded-circle user_img_msg\"/>\r\n                                  {/*<span className={m.author.is_online ? 'online_icon' : 'online_icon offline' }></span> */}\r\n                              </div>\r\n                              <div className={getCurrentUserId() == m.author_id ? ' msg_cotainer_send' : ' msg_cotainer' }>\r\n                                {m.author.username}: {m.message}\r\n                                <span className=\"msg_time\">{moment(m.created_at).format('YYYY-MM-DD HH:mm')}</span>\r\n                              </div>\r\n                          </div>\r\n                      )\r\n                    })}\r\n                  <div className=\"card-footer\">\r\n                      <Formik validationSchema={schema} onSubmit={handleSubmit}\r\n                          initialValues={{author:'xyz',message:''}}\r\n                          >\r\n                          {({\r\n                          handleSubmit,\r\n                          handleChange,\r\n                          handleBlur,\r\n                          values,\r\n                          touched,\r\n                          isInvalid,\r\n                          errors,\r\n                          }) => (\r\n                          <Form noValidate onSubmit={handleSubmit}>\r\n                              <Form.Row>\r\n                                  <Form.Group as={Col} md=\"12\" controlId=\"handle\">\r\n                                      <Form.Label>Message</Form.Label>\r\n                                      <Form.Control\r\n                                      type=\"text\"\r\n                                      name=\"message\"\r\n                                      placeholder=\"Message\"\r\n                                      value={values.message || \"\"}\r\n                                      onChange={handleChange}\r\n                                      isInvalid={touched.message && errors.message}\r\n                                      />\r\n                                      <Form.Control.Feedback type=\"invalid\">\r\n                                          {errors.message}\r\n                                      </Form.Control.Feedback>\r\n                                  </Form.Group>\r\n                              </Form.Row>\r\n                          </Form>\r\n                          )}\r\n                      </Formik>\r\n                  </div>\r\n              </div>\r\n\r\n         </div>\r\n       \r\n       </div>\r\n     \r\n     </div>\r\n   \r\n   </div>\r\n  </div>\r\n);\r\n}\r\nexport default ChatRoomPage;"]},"metadata":{},"sourceType":"module"}