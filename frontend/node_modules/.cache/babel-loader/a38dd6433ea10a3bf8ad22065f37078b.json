{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\0\\u0412\\u0441\\u0456 \\u0432\\u0435\\u0440\\u0441\\u0456\\u0457\\\\Job-Portal-Redux\\\\frontend\\\\src\\\\components\\\\chat\\\\HomePage\\\\HomePage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\"; // import { Formik } from \"formik\";\n\nimport Form from \"react-bootstrap/Form\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport Badge from 'react-bootstrap/Badge';\nimport Button from \"react-bootstrap/Button\"; // import Loader from \"react-loader-spinner\";\n// import io from \"socket.io-client\";\n\nimport { Redirect } from \"react-router\";\nimport \"./HomePage.css\";\nimport \"../ChatRoom/\";\nimport addIcon from '../../../images/add-icon.jpg';\nimport { joinChatRoom, getChatRooms } from \"../../../utils/requests\";\nimport { API_BASE_URL, ACCESS_TOKEN_NAME } from '../../../constants/constants'; // const socket = io(API_BASE_URL);\n\nconst getChatRoomId = () => {\n  return localStorage.getItem(\"chatRoomId\"); //return JSON.parse(localStorage.getItem(\"chatRoomId\"));\n};\n\nfunction HomePage() {\n  _s();\n\n  const [initialized, setInitialized] = useState(false);\n  const [redirect, setRedirect] = useState(false);\n  const [rooms, setRooms] = useState([]);\n  const [isLoading, setLoading] = useState(false);\n  const [redirectLogin, setRedirectLogin] = useState(false);\n  const [sppiner, setSpinner] = useState(false);\n  const [redirectCreateRoom, setRedirectCreateRoom] = useState(false);\n\n  const getRooms = async () => {\n    setInitialized(true);\n    setSpinner(true);\n    const response = await getChatRooms();\n    console.log(\"getRooms response home.j\");\n    console.log(response);\n    setRooms(response.data);\n    setSpinner(false);\n  };\n\n  useEffect(() => {\n    if (!initialized) {\n      getRooms();\n    }\n  }, [isLoading]); // [] means like componentDidMount\n\n  async function createRoomHandler() {\n    if (!localStorage.getItem(ACCESS_TOKEN_NAME)) setRedirectLogin(true);\n    console.log(\"createRoomHandler clicked\");\n    setRedirectCreateRoom(true);\n  }\n\n  async function handleClick(id, name, i) {\n    if (!localStorage.getItem(ACCESS_TOKEN_NAME)) setRedirectLogin(true);\n    setLoading(true);\n    localStorage.setItem(\"chatRoomId\", id);\n    localStorage.setItem(\"chatRoomName\", name);\n    let token = localStorage.getItem(ACCESS_TOKEN_NAME);\n\n    try {\n      await joinChatRoom(id, token);\n      setRedirect(true);\n    } catch (err) {\n      console.log(\"joinChatRoom error\");\n      console.log(err);\n      localStorage.removeItem(ACCESS_TOKEN_NAME);\n      setLoading(false);\n      setRedirectLogin(true);\n    }\n  }\n\n  if (redirect) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/chatroom\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 12\n    }, this);\n  }\n\n  if (redirectLogin) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 12\n    }, this);\n  }\n\n  if (redirectCreateRoom) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/createroom\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-page\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid h-100 mt-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-center h-100\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4 col-xl-3 chat\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card mb-sm-3 mb-md-0 contacts_card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-header\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"Search...\",\n                  name: \"\",\n                  className: \"form-control search\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input-group-prepend\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"input-group-text search_btn\",\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"fas fa-search\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 99,\n                      columnNumber: 79\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 99,\n                    columnNumber: 33\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 98,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body contacts_body\",\n              children: /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"contacts\",\n                children: rooms.map((room, i) => {\n                  return /*#__PURE__*/_jsxDEV(\"li\", {\n                    className: getChatRoomId() == room._id ? ' active-chat' : ' not-active-chat',\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-flex bd-highlight\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"img_cont\",\n                        children: /*#__PURE__*/_jsxDEV(\"img\", {\n                          src: \"https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg\",\n                          className: \"rounded-circle user_img\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 122,\n                          columnNumber: 37\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 121,\n                        columnNumber: 33\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"user_info\",\n                        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                          children: room.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 125,\n                          columnNumber: 37\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: /*#__PURE__*/_jsxDEV(Button, {\n                            className: \" ml-2\",\n                            variant: \"dark\",\n                            size: \"sm\",\n                            disabled: isLoading,\n                            onClick: () => handleClick(room._id, room.name, i),\n                            children: isLoading ? 'Joining…' : 'Join Room'\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 127,\n                            columnNumber: 41\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 126,\n                          columnNumber: 37\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 124,\n                        columnNumber: 33\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 120,\n                      columnNumber: 29\n                    }, this)\n                  }, i, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 119,\n                    columnNumber: 29\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-footer\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  onClick: () => createRoomHandler(),\n                  className: \"rounded-circle create-room\",\n                  src: addIcon,\n                  alt: \"Create Chat Room\",\n                  width: \"60\",\n                  height: \"60\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 27\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n\n_s(HomePage, \"H0dRvbfsqAPsSnbQHVuY2BJGn74=\");\n\n_c = HomePage;\nexport default HomePage;\n\nvar _c;\n\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"sources":["D:/0Всі версії/Job-Portal-Redux/frontend/src/components/chat/HomePage/HomePage.js"],"names":["React","useEffect","useState","Form","Container","Row","Col","ListGroup","Badge","Button","Redirect","addIcon","joinChatRoom","getChatRooms","API_BASE_URL","ACCESS_TOKEN_NAME","getChatRoomId","localStorage","getItem","HomePage","initialized","setInitialized","redirect","setRedirect","rooms","setRooms","isLoading","setLoading","redirectLogin","setRedirectLogin","sppiner","setSpinner","redirectCreateRoom","setRedirectCreateRoom","getRooms","response","console","log","data","createRoomHandler","handleClick","id","name","i","setItem","token","err","removeItem","map","room","_id"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C,C,CACA;;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,MAAP,MAAmB,wBAAnB,C,CACA;AACA;;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAO,gBAAP;AACA,OAAO,cAAP;AACA,OAAOC,OAAP,MAAoB,8BAApB;AACA,SAASC,YAAT,EAAuBC,YAAvB,QAA2C,yBAA3C;AACA,SAAQC,YAAR,EAAsBC,iBAAtB,QAA8C,8BAA9C,C,CACA;;AACA,MAAMC,aAAa,GAAG,MAAM;AAC1B,SAAOC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAP,CAD0B,CAE1B;AACD,CAHD;;AAKA,SAASC,QAAT,GAAoB;AAAA;;AAClB,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCnB,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAACoB,QAAD,EAAWC,WAAX,IAA0BrB,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM,CAACsB,KAAD,EAAQC,QAAR,IAAoBvB,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACwB,SAAD,EAAYC,UAAZ,IAA0BzB,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM,CAAC0B,aAAD,EAAgBC,gBAAhB,IAAoC3B,QAAQ,CAAC,KAAD,CAAlD;AACA,QAAM,CAAC4B,OAAD,EAAUC,UAAV,IAAwB7B,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAAC8B,kBAAD,EAAqBC,qBAArB,IAA8C/B,QAAQ,CAAC,KAAD,CAA5D;;AAEA,QAAMgC,QAAQ,GAAG,YAAY;AAC3Bb,IAAAA,cAAc,CAAC,IAAD,CAAd;AACAU,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,UAAMI,QAAQ,GAAG,MAAMtB,YAAY,EAAnC;AACAuB,IAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACAV,IAAAA,QAAQ,CAACU,QAAQ,CAACG,IAAV,CAAR;AACAP,IAAAA,UAAU,CAAC,KAAD,CAAV;AACD,GARD;;AAWA9B,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACmB,WAAL,EAAkB;AAChBc,MAAAA,QAAQ;AACT;AACF,GAJQ,EAIP,CAACR,SAAD,CAJO,CAAT,CApBkB,CAyBhB;;AAEF,iBAAea,iBAAf,GAAkC;AAChC,QAAG,CAACtB,YAAY,CAACC,OAAb,CAAqBH,iBAArB,CAAJ,EACEc,gBAAgB,CAAC,IAAD,CAAhB;AACFO,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACAJ,IAAAA,qBAAqB,CAAC,IAAD,CAArB;AACD;;AAED,iBAAeO,WAAf,CAA2BC,EAA3B,EAA8BC,IAA9B,EAAmCC,CAAnC,EAAqC;AACnC,QAAG,CAAC1B,YAAY,CAACC,OAAb,CAAqBH,iBAArB,CAAJ,EACEc,gBAAgB,CAAC,IAAD,CAAhB;AAEFF,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAV,IAAAA,YAAY,CAAC2B,OAAb,CAAqB,YAArB,EAAmCH,EAAnC;AACAxB,IAAAA,YAAY,CAAC2B,OAAb,CAAqB,cAArB,EAAqCF,IAArC;AACA,QAAIG,KAAK,GAAG5B,YAAY,CAACC,OAAb,CAAqBH,iBAArB,CAAZ;;AACA,QAAG;AACD,YAAMH,YAAY,CAAC6B,EAAD,EAAKI,KAAL,CAAlB;AACAtB,MAAAA,WAAW,CAAC,IAAD,CAAX;AACD,KAHD,CAGC,OAAMuB,GAAN,EAAU;AACTV,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACAD,MAAAA,OAAO,CAACC,GAAR,CAAYS,GAAZ;AACA7B,MAAAA,YAAY,CAAC8B,UAAb,CAAwBhC,iBAAxB;AACAY,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACD;AACF;;AAED,MAAIP,QAAJ,EAAc;AACZ,wBAAO,QAAC,QAAD;AAAU,MAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,YAAP;AACD;;AACD,MAAGM,aAAH,EAAiB;AACf,wBAAO,QAAC,QAAD;AAAU,MAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,YAAP;AACD;;AACD,MAAGI,kBAAH,EAAsB;AACpB,wBAAO,QAAC,QAAD;AAAU,MAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,YAAP;AACD;;AACD,sBAEE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA,2BAEI;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,kCAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,wBAAf;AAAA,iCACI;AAAK,YAAA,SAAS,EAAC,oCAAf;AAAA,oCACI;AAAK,cAAA,SAAS,EAAC,aAAf;AAAA,qCACI;AAAK,gBAAA,SAAS,EAAC,aAAf;AAAA,wCACI;AAAO,kBAAA,IAAI,EAAC,MAAZ;AAAmB,kBAAA,WAAW,EAAC,WAA/B;AAA2C,kBAAA,IAAI,EAAC,EAAhD;AAAmD,kBAAA,SAAS,EAAC;AAA7D;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI;AAAK,kBAAA,SAAS,EAAC,qBAAf;AAAA,yCACI;AAAM,oBAAA,SAAS,EAAC,6BAAhB;AAAA,2CAA8C;AAAG,sBAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA;AAA9C;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,wBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,oBADJ,eASI;AAAK,cAAA,SAAS,EAAC,yBAAf;AAAA,qCAaI;AAAI,gBAAA,SAAS,EAAC,UAAd;AAAA,0BACKR,KAAK,CAACwB,GAAN,CAAU,CAACC,IAAD,EAAON,CAAP,KAAW;AACtB,sCACA;AAAI,oBAAA,SAAS,EAAE3B,aAAa,MAAMiC,IAAI,CAACC,GAAxB,GAA8B,cAA9B,GAA+C,kBAA9D;AAAA,2CACA;AAAK,sBAAA,SAAS,EAAC,qBAAf;AAAA,8CACI;AAAK,wBAAA,SAAS,EAAC,UAAf;AAAA,+CACI;AAAK,0BAAA,GAAG,EAAC,4DAAT;AAAsE,0BAAA,SAAS,EAAC;AAAhF;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,8BADJ,eAII;AAAK,wBAAA,SAAS,EAAC,WAAf;AAAA,gDACI;AAAA,oCAAOD,IAAI,CAACP;AAAZ;AAAA;AAAA;AAAA;AAAA,gCADJ,eAEI;AAAA,iDACI,QAAC,MAAD;AACI,4BAAA,SAAS,EAAC,OADd;AAEI,4BAAA,OAAO,EAAC,MAFZ;AAGI,4BAAA,IAAI,EAAC,IAHT;AAII,4BAAA,QAAQ,EAAEhB,SAJd;AAKI,4BAAA,OAAO,EAAE,MAAMc,WAAW,CAACS,IAAI,CAACC,GAAN,EAAWD,IAAI,CAACP,IAAhB,EAAuBC,CAAvB,CAL9B;AAAA,sCAOCjB,SAAS,GAAG,UAAH,GAAgB;AAP1B;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gCAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,8BAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADA,qBAAwFiB,CAAxF;AAAA;AAAA;AAAA;AAAA,0BADA;AAuBC,iBAxBA;AADL;AAAA;AAAA;AAAA;AAAA;AAbJ;AAAA;AAAA;AAAA;AAAA,oBATJ,eAkDI;AAAK,cAAA,SAAS,EAAC,aAAf;AAAA,qCAEI;AAAK,gBAAA,SAAS,EAAC,aAAf;AAAA,uCACE;AAAK,kBAAA,OAAO,EAAE,MAAMJ,iBAAiB,EAArC;AAA0C,kBAAA,SAAS,EAAC,4BAApD;AAAiF,kBAAA,GAAG,EAAE5B,OAAtF;AAAgG,kBAAA,GAAG,EAAC,kBAApG;AAAuH,kBAAA,KAAK,EAAC,IAA7H;AAAkI,kBAAA,MAAM,EAAC;AAAzI;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,oBAlDJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AAFJ;AAAA;AAAA;AAAA;AAAA,UAFF;AAuED;;GAtIQQ,Q;;KAAAA,Q;AAuIT,eAAeA,QAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n// import { Formik } from \"formik\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport ListGroup from 'react-bootstrap/ListGroup'\r\nimport Badge from 'react-bootstrap/Badge'\r\nimport Button from \"react-bootstrap/Button\";\r\n// import Loader from \"react-loader-spinner\";\r\n// import io from \"socket.io-client\";\r\nimport { Redirect } from \"react-router\";\r\nimport \"./HomePage.css\";\r\nimport \"../ChatRoom/\";\r\nimport addIcon from '../../../images/add-icon.jpg';\r\nimport { joinChatRoom, getChatRooms } from \"../../../utils/requests\";\r\nimport {API_BASE_URL, ACCESS_TOKEN_NAME} from '../../../constants/constants';\r\n// const socket = io(API_BASE_URL);\r\nconst getChatRoomId = () => {\r\n  return localStorage.getItem(\"chatRoomId\");\r\n  //return JSON.parse(localStorage.getItem(\"chatRoomId\"));\r\n};\r\n\r\nfunction HomePage() {\r\n  const [initialized, setInitialized] = useState(false);\r\n  const [redirect, setRedirect] = useState(false);\r\n  const [rooms, setRooms] = useState([]);\r\n  const [isLoading, setLoading] = useState(false);\r\n  const [redirectLogin, setRedirectLogin] = useState(false);\r\n  const [sppiner, setSpinner] = useState(false);\r\n  const [redirectCreateRoom, setRedirectCreateRoom] = useState(false);\r\n  \r\n  const getRooms = async () => {\r\n    setInitialized(true);\r\n    setSpinner(true)\r\n    const response = await getChatRooms();\r\n    console.log(\"getRooms response home.j\")\r\n    console.log(response)\r\n    setRooms(response.data);\r\n    setSpinner(false)\r\n  };\r\n\r\n\r\n  useEffect(() => {\r\n    if (!initialized) {\r\n      getRooms();\r\n    }\r\n  },[isLoading]);\r\n    // [] means like componentDidMount\r\n\r\n  async function createRoomHandler(){\r\n    if(!localStorage.getItem(ACCESS_TOKEN_NAME))\r\n      setRedirectLogin(true)\r\n    console.log(\"createRoomHandler clicked\")\r\n    setRedirectCreateRoom(true);\r\n  }\r\n\r\n  async function handleClick(id,name,i){\r\n    if(!localStorage.getItem(ACCESS_TOKEN_NAME))\r\n      setRedirectLogin(true)\r\n\r\n    setLoading(true);\r\n    localStorage.setItem(\"chatRoomId\", id);\r\n    localStorage.setItem(\"chatRoomName\", name);\r\n    let token = localStorage.getItem(ACCESS_TOKEN_NAME)\r\n    try{\r\n      await joinChatRoom(id, token);\r\n      setRedirect(true);\r\n    }catch(err){\r\n      console.log(\"joinChatRoom error\")\r\n      console.log(err)\r\n      localStorage.removeItem(ACCESS_TOKEN_NAME)\r\n      setLoading(false);\r\n      setRedirectLogin(true)\r\n    }\r\n  }\r\n\r\n  if (redirect) {\r\n    return <Redirect to=\"/chatroom\" />;\r\n  }\r\n  if(redirectLogin){\r\n    return <Redirect to='/login' />\r\n  }\r\n  if(redirectCreateRoom){\r\n    return <Redirect to='/createroom' />\r\n  }\r\n  return (\r\n\r\n    <div className=\"home-page\">\r\n\r\n        <div className=\"container-fluid h-100 mt-5\">\r\n          <div className=\"row justify-content-center h-100\">\r\n            <div className=\"col-md-4 col-xl-3 chat\">\r\n                <div className=\"card mb-sm-3 mb-md-0 contacts_card\">\r\n                    <div className=\"card-header\">\r\n                        <div className=\"input-group\">\r\n                            <input type=\"text\" placeholder=\"Search...\" name=\"\" className=\"form-control search\"/>\r\n                            <div className=\"input-group-prepend\">\r\n                                <span className=\"input-group-text search_btn\"><i className=\"fas fa-search\"></i></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"card-body contacts_body\">\r\n\r\n                     {/* <div className=\"text-center\">\r\n                        {sppiner ?  \r\n                        <Loader\r\n                            type=\"ThreeDots\"\r\n                            color=\"#00BFFF\"\r\n                            height={100}\r\n                            width={100}\r\n                            />\r\n                        : ''}\r\n                    </div> */}\r\n\r\n                        <ul className=\"contacts\">\r\n                            {rooms.map((room, i)=>{\r\n                            return(\r\n                            <li className={getChatRoomId() == room._id ? ' active-chat' : ' not-active-chat' } key={i}> \r\n                            <div className=\"d-flex bd-highlight\">\r\n                                <div className=\"img_cont\">\r\n                                    <img src=\"https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg\" className=\"rounded-circle user_img\"/>\r\n                                </div>\r\n                                <div className=\"user_info\">\r\n                                    <span>{room.name}</span>\r\n                                    <p>\r\n                                        <Button\r\n                                            className=\" ml-2\"\r\n                                            variant=\"dark\"\r\n                                            size=\"sm\"\r\n                                            disabled={isLoading}\r\n                                            onClick={() => handleClick(room._id, room.name,  i)}\r\n                                        >\r\n                                        {isLoading ? 'Joining…' : 'Join Room'}\r\n                                        </Button>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                            </li>\r\n                            )\r\n                            })}\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"card-footer\">\r\n\r\n                        <div className=\"text-center\">\r\n                          <img onClick={() => createRoomHandler() } className=\"rounded-circle create-room\" src={addIcon}  alt=\"Create Chat Room\" width=\"60\" height=\"60\" />\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n    </div>\r\n  );\r\n}\r\nexport default HomePage;"]},"metadata":{},"sourceType":"module"}